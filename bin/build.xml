<?xml version="1.0"?>

<project name="ProjectName" default="war" basedir=".">

	<description>
		My Project
	</description>

	<property environment="env"/>
	<property file="build.properties"/>

	<property name="project.dir" value="../src"/>
	<property name="jar" value="project.jar"/>
	<property name="build.dir" value="../build"/>
	<property name="dist-app.dir" value="../dist"/>
	<property name="main.resources" value="../WebRoot"/>
	
	<property name="dist.dir" value="../dist/webapps"/>
	<property name="project-webapp.dir" value="project"/>
	<property name="reports.dir" value="reports"/>
	<property name="web.inf.dir" value="${dist.dir}/${project-webapp.dir}/WEB-INF"/>
	
	<path id="libs.path">
		<pathelement location="${struts.jar}"/>
		<pathelement location="${javax.servlet.jar}"/>
		<pathelement location="${cglib-nodep.jar}"/>
		<pathelement location="${commons-beanutils.jar}"/>
		<pathelement location="${commons-chain.jar}"/>
		<pathelement location="${commons-collections.jar}"/>
		<pathelement location="${commons-dbcp.jar}"/>
		<pathelement location="${commons-digester.jar}"/>
		<pathelement location="${commons-logging.jar}"/>
		<pathelement location="${commons-pool.jar}"/>
		<pathelement location="${dom4j.jar}"/>
		<pathelement location="${ehcache.jar}"/>
		<pathelement location="${hibernate3.jar}"/>
		<pathelement location="${jta.jar}"/>
		<pathelement location="${mysql-connector-java.jar}"/>
		<pathelement location="${org-springframework-transaction.jar}"/>
		<pathelement location="${spring-beans.jar}"/>
		<pathelement location="${spring-context.jar}"/>
		<pathelement location="${spring-core.jar}"/>
		<pathelement location="${spring-dao.jar}"/>
		<pathelement location="${spring-hibernate3.jar}"/>
		<pathelement location="${spring-jdbc.jar}"/>
		<pathelement location="${spring-orm.jar}"/>
		<pathelement location="${spring-struts.jar}"/>
		<pathelement location="${spring-web.jar}"/>
		<pathelement location="${standard.jar}"/>
		<pathelement location="${struts-extras.jar}"/>
		<pathelement location="${struts-taglib.jar}"/>
		
	</path>
	
	<target name="init">
		<tstamp/>
	</target>

	<!-- Compile the source -->
	<target name="compile-all" depends="init" description="Compile the source">
		<mkdir dir="${build.dir}"/>	
		<javac srcdir="${project.dir}" destdir="${build.dir}" debug="true" classpathref="libs.path" deprecation="on" target="1.5"/>
	</target>

	<!-- <target name="jar" depends="compile-all">
		<jar jarfile="${build.dir}/${jar}" basedir="${build.dir}" >
		</jar>
	</target> -->
	
	<target name="war" depends="clean-distribution, compile-all" description="Build the distribution">
		<mkdir dir="${dist-app.dir}"/>
		<copy todir="${dist.dir}/${project-webapp.dir}">
			<fileset dir="${main.resources}">
				<!--<exclude name="**/classes/**"/>-->
			</fileset>
		</copy>
		
		<!--<copy todir="${web.inf.dir	}/classes">
			<fileset dir="${project.home}/build">
				<include name="**/*.class"/>
			</fileset>	
		</copy>
		
		<copy todir="${web.inf.dir}/classes">
			<fileset dir="${project.home}/WebRoot/WEB-INF/classes">
				<include name="**/*.xml" />
			</fileset>	
		</copy> -->
		
		<war destfile="${dist-app.dir}/project.war" webxml="${web.inf.dir}/web.xml" defaultexcludes="true">
			<fileset dir="${dist.dir}/${project-webapp.dir}"/> 
		</war>	
	</target>
	
	<!-- Clean the build -->
	<target name="clean-build" description="Clean up build">
		<delete dir="${build.dir}"/>
	</target>
	
	<!-- Cleans the distribution -->
	<target name="clean-distribution" if="dist-app.dir">
		<delete dir="${dist-app.dir}"/>
	</target>
	
</project>